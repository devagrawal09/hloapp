<template name="usernameSettings">
    <div class="container-small">
        <h3 class="text-center">{{texts.sidebar.username}}</h3>

        {{#if editMode}}
            {{#autoForm
                id="usernameForm"
                schema=schema
                doc=currentUser
                type="method"
                meteormethod="user.username"
            }}
                {{> afQuickField name="username" label=texts.username.enter}}
                <button class="btn btn-block">
                    {{#if submitting}}
                    <i class="fa fa-spinner fa-spin"></i>
                    {{else}}
                    {{texts.username.save}}
                    {{/if}}
                </button>
            {{/autoForm}}
        {{else}}
            <p>
                {{currentUser.username}}
                <button class="btn btn-default pull-right edit-mode">
                    <i class="fa fa-pencil"></i>
                </button>
            </p>
        {{/if}}
    </div>
</template>
